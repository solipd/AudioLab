#N canvas 185 122 1270 639 10;
#X declare -path ..;
#X declare -path ./audio;
#X obj 424 448 pp.grainer~;
#A saved empty_slot \; int.grain-trigger 0 | random-position% 1.0683 | position% 8.08021 | random-q 9 | random-frequency 5000 | random-amplitude 0 | random-panorama 200 | random-pitch 0 | random-grainsize 0 | random-position 220 | random-grain-distance 0 | env-shape 0.483516 | env-bias 0.483516 | env-type 0 | play 0 | playback-speed 94 | q 7 | frequency 100 | filter-bypass 1 | amplitude -10.9506 | panorama 0 | pitch 1200 | grainsize 101 | position 1664 | grain-distance 50 | open /home/philipp/Documents/Pd/AudioLab/Examples/audio/MusicBox.wav | \; int.grain-trigger 0 | random-position% 0.0777778 | position% 60.807 | random-q 9 | random-frequency 5000 | random-amplitude 0 | random-panorama 30 | random-pitch 10 | random-grainsize 0 | random-position 133 | random-grain-distance 0 | env-shape 0.472527 | env-bias 0.450549 | env-type 0 | play 0 | playback-speed 8 | q 7 | frequency 100 | filter-bypass 1 | amplitude -2.34672 | panorama 0 | pitch 700 | grainsize 100 | position 103980 | grain-distance 50 | open /home/philipp/Documents/Pd/AudioLab/Examples/audio/Trumpet.wav | \; int.grain-trigger 0 | random-position% 1.11686 | position% 54.9493 | random-q 9 | random-frequency 5000 | random-amplitude 0 | random-panorama 200 | random-pitch 0 | random-grainsize 0 | random-position 230 | random-grain-distance 0 | env-shape 0.483516 | env-bias 0.043956 | env-type 0 | play 0 | playback-speed 94 | q 7 | frequency 100 | filter-bypass 1 | amplitude -29.1296 | panorama 0 | pitch -500 | grainsize 250 | position 11316 | grain-distance 50 | open /home/philipp/Documents/Pd/AudioLab/Examples/audio/MusicBox.wav | \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 425 570 pp.out~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 597 253 route 1 2 3 4;
#X obj 597 230 pack f f f;
#X obj 597 205 poly 4 1;
#N canvas 189 99 628 629 voice 0;
#X obj 208 28 inlet;
#X obj 208 76 unpack, f 32;
#X obj 208 99 > 0;
#X obj 58 377 metro 10;
#X obj 235 332 pack 1 100;
#X obj 58 207 sel 1 0;
#X obj 253 363 pack 0 1000;
#X obj 235 430 rmstodb;
#X obj 235 453 - 100;
#X msg 208 51 \$2 \$1;
#X obj 214 484 f;
#X obj 214 533 outlet;
#X msg 77 348 0;
#X obj 235 292 sel 1 0;
#X msg 25 252 stop;
#X obj 316 339 r \$0-decay;
#X obj 292 309 r \$0-attack;
#X obj 122 258 r \$0-decay;
#X obj 214 510 pack, f 31;
#X obj 77 283 del 1000;
#X obj 208 121 t f f;
#X obj 114 377 r \$0-graindistance;
#X text 238 102 check if amplitude is grater then 0;
#X text 7 184 start/stop metro to trigger grains;
#X text 243 265 simple attack-decay envelope generator;
#X obj 235 399 line 0 5;
#X text 256 58 amplitude \, pitch;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 1 1 18 1;
#X connect 2 0 20 0;
#X connect 3 0 10 0;
#X connect 4 0 25 0;
#X connect 5 0 3 0;
#X connect 5 0 14 0;
#X connect 5 1 19 0;
#X connect 6 0 25 0;
#X connect 7 0 8 0;
#X connect 8 0 10 1;
#X connect 9 0 1 0;
#X connect 10 0 18 0;
#X connect 12 0 3 0;
#X connect 13 0 4 0;
#X connect 13 1 6 0;
#X connect 14 0 19 0;
#X connect 15 0 6 1;
#X connect 16 0 4 1;
#X connect 17 0 19 1;
#X connect 18 0 11 0;
#X connect 19 0 12 0;
#X connect 20 0 5 0;
#X connect 20 1 13 0;
#X connect 21 0 3 1;
#X connect 25 0 7 0;
#X restore 597 303 pd voice;
#X msg 597 355 amplitude \$1 \, pitch \$2 \, bang;
#X obj 2 2 cnv 15 380 630 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 22 222 hsl 200 15 0 100 0 0 \$0-volume \$0-volumer Volume -2 -8 2 12 #fc8000 #000000 #000000 0 1;
#N canvas 440 301 450 300 init 0;
#X obj 164 32 loadbang;
#X obj 164 53 f \$0;
#X msg 70 61 \; pd dsp 1;
#X msg 163 74 \; \$1-preset 0 \; \$1-attackr 100 \; \$1-decayr 2000 \; \$1-graindistancer 10 \; \$1-seq 1 \;;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X restore 17 11 pd init;
#X obj 276 6 declare -path ..;
#N canvas 460 181 1183 678 sequencer 0;
#X obj 158 87 inlet;
#N canvas 0 50 450 250 (subpatch) 0;
#X array \$0-melo 9 float 3;
#A 0 0 7 24 14 19 10 12 7 0;
#A color 0;
#A width 2;
#X coords 0 24 9 0 200 140 1;
#X restore 554 104 graph;
#N canvas 0 50 450 250 (subpatch) 0;
#X array \$0-melo2 16 float 3;
#A 0 21 0.1 0.1 19 0.1 0.1 0.1 0.1 14 0.1 0.1 12 0.1 0.1 0.1 0.1;
#A color 0;
#A width 2;
#X coords 0 24 16 0 200 140 1;
#X restore 786 104 graph;
#X obj 158 570 pack, f 11;
#X obj 158 521 - 60;
#X obj 158 544 * 100;
#X obj 158 289 tabread \$0-melo;
#X obj 158 114 tgl 18 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 158 169 f;
#X obj 237 167 + 1;
#X obj 158 379 + 48;
#X obj 158 355 i;
#X obj 237 190 mod 16;
#X obj 158 264 mod 8;
#X obj 267 287 tabread \$0-melo2;
#X obj 158 137 metro 670;
#X obj 554 61 array set \$0-melo;
#X msg 554 38 0 7 24 14 19 10 12 7 0;
#X obj 787 61 array set \$0-melo2;
#X obj 158 593 outlet;
#X obj 300 242 tgl 18 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 192 379 5 0 0 0 - - - 0;
#X obj 245 422 r \$0-attack;
#X obj 245 445 + 150;
#X text 288 443 add attack time to notelength;
#X text 229 377 basenote;
#X obj 158 471 makenote 80 150;
#X floatatom 257 471 5 0 0 0 - - - 0;
#X text 203 543 convert to cents;
#X text 204 522 map original pitch to c4;
#X obj 267 264 spigot;
#X text 319 262 use second sequencer to add another note layer;
#X obj 267 310 sel 0.1;
#X text 321 313 0.1 for silence;
#X msg 787 38 21 0.1 0.1 19 0.1 0.1 0.1 0.1 14 0.1 0.1 12 0.1 0.1 0.1 0.1;
#X connect 0 0 7 0;
#X connect 3 0 19 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 11 0;
#X connect 7 0 15 0;
#X connect 8 0 9 0;
#X connect 8 0 13 0;
#X connect 8 0 30 0;
#X connect 9 0 12 0;
#X connect 10 0 26 0;
#X connect 11 0 10 0;
#X connect 12 0 8 1;
#X connect 13 0 6 0;
#X connect 14 0 32 0;
#X connect 15 0 8 0;
#X connect 17 0 16 0;
#X connect 20 0 30 1;
#X connect 21 0 10 1;
#X connect 22 0 23 0;
#X connect 23 0 26 2;
#X connect 23 0 27 0;
#X connect 26 0 4 0;
#X connect 26 1 3 1;
#X connect 30 0 14 0;
#X connect 32 1 11 0;
#X connect 34 0 18 0;
#X restore 485 78 pd sequencer;
#X obj 597 77 notein, f 12;
#X obj 597 160 pack, f 10;
#X obj 597 109 - 60;
#X obj 597 132 * 100;
#X text 652 131 convert to cents;
#X obj 485 44 tgl 18 0 empty \$0-seq empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 24 326 hsl 200 15 0 1000 0 0 \$0-attack \$0-attackr Attack -2 -8 2 12 #ffffff #000000 #000000 0 1;
#X obj 24 364 hsl 200 15 2 2500 0 0 \$0-decay \$0-decayr Decay -2 -8 2 12 #ffffff #000000 #000000 0 1;
#X obj 25 412 hsl 200 15 7 200 0 0 \$0-graindistance \$0-graindistancer Grain_Distance -2 -8 2 12 #ffffff #000000 #000000 0 1;
#X text 654 110 map original pitch to c4;
#X text 682 78 midi note in;
#X obj 246 29 declare -path ./audio;
#X text 826 294 parameters attack \, decay and graindistance are received inside these subpatches;
#N canvas 189 99 628 629 voice 0;
#X obj 208 28 inlet;
#X obj 208 76 unpack, f 32;
#X obj 208 99 > 0;
#X obj 58 377 metro 10;
#X obj 235 332 pack 1 100;
#X obj 58 207 sel 1 0;
#X obj 253 363 pack 0 1000;
#X obj 235 430 rmstodb;
#X obj 235 453 - 100;
#X msg 208 51 \$2 \$1;
#X obj 214 484 f;
#X obj 214 533 outlet;
#X msg 77 348 0;
#X obj 235 292 sel 1 0;
#X msg 25 252 stop;
#X obj 316 339 r \$0-decay;
#X obj 292 309 r \$0-attack;
#X obj 122 258 r \$0-decay;
#X obj 214 510 pack, f 31;
#X obj 77 283 del 1000;
#X obj 208 121 t f f;
#X obj 114 377 r \$0-graindistance;
#X text 238 102 check if amplitude is grater then 0;
#X text 7 184 start/stop metro to trigger grains;
#X text 243 265 simple attack-decay envelope generator;
#X obj 235 399 line 0 5;
#X text 256 58 amplitude \, pitch;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 1 1 18 1;
#X connect 2 0 20 0;
#X connect 3 0 10 0;
#X connect 4 0 25 0;
#X connect 5 0 3 0;
#X connect 5 0 14 0;
#X connect 5 1 19 0;
#X connect 6 0 25 0;
#X connect 7 0 8 0;
#X connect 8 0 10 1;
#X connect 9 0 1 0;
#X connect 10 0 18 0;
#X connect 12 0 3 0;
#X connect 13 0 4 0;
#X connect 13 1 6 0;
#X connect 14 0 19 0;
#X connect 15 0 6 1;
#X connect 16 0 4 1;
#X connect 17 0 19 1;
#X connect 18 0 11 0;
#X connect 19 0 12 0;
#X connect 20 0 5 0;
#X connect 20 1 13 0;
#X connect 21 0 3 1;
#X connect 25 0 7 0;
#X restore 653 303 pd voice;
#N canvas 189 99 628 629 voice 0;
#X obj 208 28 inlet;
#X obj 208 76 unpack, f 32;
#X obj 208 99 > 0;
#X obj 58 377 metro 10;
#X obj 235 332 pack 1 100;
#X obj 58 207 sel 1 0;
#X obj 253 363 pack 0 1000;
#X obj 235 430 rmstodb;
#X obj 235 453 - 100;
#X msg 208 51 \$2 \$1;
#X obj 214 484 f;
#X obj 214 533 outlet;
#X msg 77 348 0;
#X obj 235 292 sel 1 0;
#X msg 25 252 stop;
#X obj 316 339 r \$0-decay;
#X obj 292 309 r \$0-attack;
#X obj 122 258 r \$0-decay;
#X obj 214 510 pack, f 31;
#X obj 77 283 del 1000;
#X obj 208 121 t f f;
#X obj 114 377 r \$0-graindistance;
#X text 238 102 check if amplitude is grater then 0;
#X text 7 184 start/stop metro to trigger grains;
#X text 243 265 simple attack-decay envelope generator;
#X obj 235 399 line 0 5;
#X text 256 58 amplitude \, pitch;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 1 1 18 1;
#X connect 2 0 20 0;
#X connect 3 0 10 0;
#X connect 4 0 25 0;
#X connect 5 0 3 0;
#X connect 5 0 14 0;
#X connect 5 1 19 0;
#X connect 6 0 25 0;
#X connect 7 0 8 0;
#X connect 8 0 10 1;
#X connect 9 0 1 0;
#X connect 10 0 18 0;
#X connect 12 0 3 0;
#X connect 13 0 4 0;
#X connect 13 1 6 0;
#X connect 14 0 19 0;
#X connect 15 0 6 1;
#X connect 16 0 4 1;
#X connect 17 0 19 1;
#X connect 18 0 11 0;
#X connect 19 0 12 0;
#X connect 20 0 5 0;
#X connect 20 1 13 0;
#X connect 21 0 3 1;
#X connect 25 0 7 0;
#X restore 709 303 pd voice;
#N canvas 189 99 628 629 voice 0;
#X obj 208 28 inlet;
#X obj 208 76 unpack, f 32;
#X obj 208 99 > 0;
#X obj 58 377 metro 10;
#X obj 235 332 pack 1 100;
#X obj 58 207 sel 1 0;
#X obj 253 363 pack 0 1000;
#X obj 235 430 rmstodb;
#X obj 235 453 - 100;
#X msg 208 51 \$2 \$1;
#X obj 214 484 f;
#X obj 214 533 outlet;
#X msg 77 348 0;
#X obj 235 292 sel 1 0;
#X msg 25 252 stop;
#X obj 316 339 r \$0-decay;
#X obj 292 309 r \$0-attack;
#X obj 122 258 r \$0-decay;
#X obj 214 510 pack, f 31;
#X obj 77 283 del 1000;
#X obj 208 121 t f f;
#X obj 114 377 r \$0-graindistance;
#X text 238 102 check if amplitude is grater then 0;
#X text 7 184 start/stop metro to trigger grains;
#X text 243 265 simple attack-decay envelope generator;
#X obj 235 399 line 0 5;
#X text 256 58 amplitude \, pitch;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 1 1 18 1;
#X connect 2 0 20 0;
#X connect 3 0 10 0;
#X connect 4 0 25 0;
#X connect 5 0 3 0;
#X connect 5 0 14 0;
#X connect 5 1 19 0;
#X connect 6 0 25 0;
#X connect 7 0 8 0;
#X connect 8 0 10 1;
#X connect 9 0 1 0;
#X connect 10 0 18 0;
#X connect 12 0 3 0;
#X connect 13 0 4 0;
#X connect 13 1 6 0;
#X connect 14 0 19 0;
#X connect 15 0 6 1;
#X connect 16 0 4 1;
#X connect 17 0 19 1;
#X connect 18 0 11 0;
#X connect 19 0 12 0;
#X connect 20 0 5 0;
#X connect 20 1 13 0;
#X connect 21 0 3 1;
#X connect 25 0 7 0;
#X restore 765 303 pd voice;
#N canvas 387 130 833 396 presets 0;
#X obj 72 42 sel 0 1;
#X obj 72 283 outlet;
#X obj 72 17 r \$0-preset;
#X msg 453 93 open MusicBox.wav \, grain-distance 50 \, position 11315 \, grainsize 250 \, pitch -500 \, panorama 0 \, amplitude 0 \, filter-bypass 1 \, playback-speed 20 \, play 0 \, env-type 0 \, env-bias 0.043956 \, env-shape 0.5 \, random-grain-distance 0 \, random-position 230 \, random-grainsize 0 \, random-pitch 0 \, random-panorama 150 \, random-amplitude 0 \, position% 54.9445 \, random-position% 1.11686 \, int.grain-trigger 0 \,;
#X msg 72 94 open Trumpet.wav \, grain-distance 50 \, position 103979 \, grainsize 100 \, pitch 700 \, panorama 0 \, amplitude 0 \, filter-bypass 1 \, playback-speed 20 \, play 0 \, env-type 0 \, env-bias 0.5 \, env-shape 0.5 \, random-grain-distance 0 \, random-position 133 \, random-grainsize 0 \, random-pitch 10 \, random-panorama 30 \, random-amplitude 0 \, position% 60.8064 \, random-position% 0.0777778 \, int.grain-trigger 0 \,;
#X connect 0 0 4 0;
#X connect 0 1 3 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X restore 610 398 pd presets;
#X text 781 348 we use internal parameters pitch and amplitude to generate a note;
#X text 639 448 other parameters can be changes in the GUI;
#X text 614 463 <-- click to open;
#X obj 22 275 hradio 18 1 0 2 \$0-preset \$0-presetr Preset 0 -9 0 10 #fcfcfc #000000 #000000 0;
#X text 509 8 use the sequencer and/or external midi note input;
#X obj 23 450 bng 17 250 50 0 \$0-loadsf \$0-loadsfr empty 17 7 0 10 #fcfcfc #000000 #000000;
#X text 44 449 <-- load soundfile;
#N canvas 387 130 206 211 open-sf 0;
#X obj 64 35 r \$0-loadsf;
#X obj 64 79 openpanel;
#X msg 64 102 open \$1;
#X obj 64 59 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 64 125 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X restore 610 422 pd open-sf;
#X obj 595 561 r \$0-volume;
#X floatatom 595 582 5 0 0 0 - - - 0;
#X msg 595 604 volume \$1;
#X text 9 83 Here we use pp.grainer~ as a polyphonic midi synthesizer with 4 voices. The original pitch of the soundfile is mapped to C4 (midi note 60).;
#X text 506 45 start/stop sequencer;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 2 0 5 0;
#X connect 2 1 25 0;
#X connect 2 2 26 0;
#X connect 2 3 27 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 4 2 3 2;
#X connect 5 0 6 0;
#X connect 6 0 0 1;
#X connect 11 0 4 0;
#X connect 12 0 14 0;
#X connect 12 1 13 1;
#X connect 13 0 4 0;
#X connect 14 0 15 0;
#X connect 15 0 13 0;
#X connect 17 0 11 0;
#X connect 25 0 6 0;
#X connect 26 0 6 0;
#X connect 27 0 6 0;
#X connect 28 0 0 1;
#X connect 36 0 0 1;
#X connect 37 0 38 0;
#X connect 38 0 39 0;
#X connect 39 0 1 2;
